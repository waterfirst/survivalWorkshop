<!DOCTYPE html>
<html lang="en"><head>
<script src="chap3_files/libs/clipboard/clipboard.min.js"></script>
<script src="chap3_files/libs/quarto-html/tabby.min.js"></script>
<script src="chap3_files/libs/quarto-html/popper.min.js"></script>
<script src="chap3_files/libs/quarto-html/tippy.umd.min.js"></script>
<link href="chap3_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="chap3_files/libs/quarto-html/quarto-html.min.css" rel="stylesheet" data-mode="light">
<link href="chap3_files/libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles"><meta charset="utf-8">
  <meta name="generator" content="quarto-1.1.189">

  <meta name="author" content="문건웅">
  <title>KM생존곡선, 로그순위검정</title>
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">
  <link rel="stylesheet" href="chap3_files/libs/revealjs/dist/reset.css">
  <link rel="stylesheet" href="chap3_files/libs/revealjs/dist/reveal.css">
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    ul.task-list{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      { color: #003b4f; background-color: #f1f3f5; }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span { color: #003b4f; } /* Normal */
    code span.al { color: #ad0000; } /* Alert */
    code span.an { color: #5e5e5e; } /* Annotation */
    code span.at { color: #657422; } /* Attribute */
    code span.bn { color: #ad0000; } /* BaseN */
    code span.bu { } /* BuiltIn */
    code span.cf { color: #003b4f; } /* ControlFlow */
    code span.ch { color: #20794d; } /* Char */
    code span.cn { color: #8f5902; } /* Constant */
    code span.co { color: #5e5e5e; } /* Comment */
    code span.cv { color: #5e5e5e; font-style: italic; } /* CommentVar */
    code span.do { color: #5e5e5e; font-style: italic; } /* Documentation */
    code span.dt { color: #ad0000; } /* DataType */
    code span.dv { color: #ad0000; } /* DecVal */
    code span.er { color: #ad0000; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #ad0000; } /* Float */
    code span.fu { color: #4758ab; } /* Function */
    code span.im { color: #00769e; } /* Import */
    code span.in { color: #5e5e5e; } /* Information */
    code span.kw { color: #003b4f; } /* Keyword */
    code span.op { color: #5e5e5e; } /* Operator */
    code span.ot { color: #003b4f; } /* Other */
    code span.pp { color: #ad0000; } /* Preprocessor */
    code span.sc { color: #5e5e5e; } /* SpecialChar */
    code span.ss { color: #20794d; } /* SpecialString */
    code span.st { color: #20794d; } /* String */
    code span.va { color: #111111; } /* Variable */
    code span.vs { color: #20794d; } /* VerbatimString */
    code span.wa { color: #5e5e5e; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="chap3_files/libs/revealjs/dist/theme/quarto.css" id="theme">
  <link href="chap3_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.css" rel="stylesheet">
  <link href="chap3_files/libs/revealjs/plugin/reveal-menu/menu.css" rel="stylesheet">
  <link href="chap3_files/libs/revealjs/plugin/reveal-menu/quarto-menu.css" rel="stylesheet">
  <link href="chap3_files/libs/revealjs/plugin/quarto-support/footer.css" rel="stylesheet">
  <style type="text/css">

  .callout {
    margin-top: 1em;
    margin-bottom: 1em;  
    border-radius: .25rem;
  }

  .callout.callout-style-simple { 
    padding: 0em 0.5em;
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
    display: flex;
  }

  .callout.callout-style-default {
    border-left: solid #acacac .3rem;
    border-right: solid 1px silver;
    border-top: solid 1px silver;
    border-bottom: solid 1px silver;
  }

  .callout .callout-body-container {
    flex-grow: 1;
  }

  .callout.callout-style-simple .callout-body {
    font-size: 1rem;
    font-weight: 400;
  }

  .callout.callout-style-default .callout-body {
    font-size: 0.9rem;
    font-weight: 400;
  }

  .callout.callout-captioned.callout-style-simple .callout-body {
    margin-top: 0.2em;
  }

  .callout:not(.callout-captioned) .callout-body {
      display: flex;
  }

  .callout:not(.no-icon).callout-captioned.callout-style-simple .callout-content {
    padding-left: 1.6em;
  }

  .callout.callout-captioned .callout-header {
    padding-top: 0.2em;
    margin-bottom: -0.2em;
  }

  .callout.callout-captioned .callout-caption  p {
    margin-top: 0.5em;
    margin-bottom: 0.5em;
  }
    
  .callout.callout-captioned.callout-style-simple .callout-content  p {
    margin-top: 0;
  }

  .callout.callout-captioned.callout-style-default .callout-content  p {
    margin-top: 0.7em;
  }

  .callout.callout-style-simple div.callout-caption {
    border-bottom: none;
    font-size: .9rem;
    font-weight: 600;
    opacity: 75%;
  }

  .callout.callout-style-default  div.callout-caption {
    border-bottom: none;
    font-weight: 600;
    opacity: 85%;
    font-size: 0.9rem;
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-default div.callout-content {
    padding-left: 0.5em;
    padding-right: 0.5em;
  }

  .callout.callout-style-simple .callout-icon::before {
    height: 1rem;
    width: 1rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 1rem 1rem;
  }

  .callout.callout-style-default .callout-icon::before {
    height: 0.9rem;
    width: 0.9rem;
    display: inline-block;
    content: "";
    background-repeat: no-repeat;
    background-size: 0.9rem 0.9rem;
  }

  .callout-caption {
    display: flex
  }
    
  .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  .callout.no-icon::before {
    display: none !important;
  }

  .callout.callout-captioned .callout-body > .callout-content > :last-child {
    margin-bottom: 0.5rem;
  }

  .callout.callout-captioned .callout-icon::before {
    margin-top: .5rem;
    padding-right: .5rem;
  }

  .callout:not(.callout-captioned) .callout-icon::before {
    margin-top: 1rem;
    padding-right: .5rem;
  }

  /* Callout Types */

  div.callout-note {
    border-left-color: #4582ec !important;
  }

  div.callout-note .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEU0lEQVRYCcVXTWhcVRQ+586kSUMMxkyaElstCto2SIhitS5Ek8xUKV2poatCcVHtUlFQk8mbaaziwpWgglJwVaquitBOfhQXFlqlzSJpFSpIYyXNjBNiTCck7x2/8/LeNDOZxDuEkgOXe++553zfefee+/OYLOXFk3+1LLrRdiO81yNqZ6K9cG0P3MeFaMIQjXssE8Z1JzLO9ls20MBZX7oG8w9GxB0goaPrW5aNMp1yOZIa7Wv6o2ykpLtmAPs/vrG14Z+6d4jpbSKuhdcSyq9wGMPXjonwmESXrriLzFGOdDBLB8Y6MNYBu0dRokSygMA/mrun8MGFN3behm6VVAwg4WR3i6FvYK1T7MHo9BK7ydH+1uurECoouk5MPRyVSBrBHMYwVobG2aOXM07sWrn5qgB60rc6mcwIDJtQrnrEr44kmy+UO9r0u9O5/YbkS9juQckLed3DyW2XV/qWBBB3ptvI8EUY3I9p/67OW+g967TNr3Sotn3IuVlfMLVnsBwH4fsnebJvyGm5GeIUA3jljERmrv49SizPYuq+z7c2H/jlGC+Ghhupn/hcapqmcudB9jwJ/3jvnvu6vu5lVzF1fXyZuZZ7U8nRmVzytvT+H3kilYvH09mLWrQdwFSsFEsxFVs5fK7A0g8gMZjbif4ACpKbjv7gNGaD8bUrlk8x+KRflttr22JEMRUbTUwwDQScyzPgedQHZT0xnx7ujw2jfVfExwYHwOsDTjLdJ2ebmeQIlJ7neo41s/DrsL3kl+W2lWvAga0tR3zueGr6GL78M3ifH0rGXrBC2aAR8uYcIA5gwV8zIE8onoh8u0Fca/ciF7j1uOzEnqcIm59sEXoGc0+z6+H45V1CvAvHcD7THztu669cnp+L0okAeIc6zjbM/24LgGM1gZk7jnRu1aQWoU9sfUOuhrmtaPIO3YY1KLLWZaEO5TKUbMY5zx8W9UJ6elpLwKXbsaZ4EFl7B4bMtDv0iRipKoDQT2sNQI9b1utXFdYisi+wzZ/ri/1m7QfDgEuvgUUEIJPq3DhX/5DWNqIXDOweC2wvIR90Oq3lDpdMIgD2r0dXvGdsEW5H6x6HLRJYU7C69VefO1x8Gde1ZFSJLfWS1jbCnhtOPxmpfv2LXOA2Xk2tvnwKKPFuZ/oRmwBwqRQDcKNeVQkYcOjtWVBuM/JuYw5b6isojIkYxyYAFn5K7ZBF10fea52y8QltAg6jnMqNHFBmGkQ1j+U43HMi2xMar1Nv0zGsf1s8nUsmUtPOOrbFIR8bHFDMB5zL13Gmr/kGlCkUzedTzzmzsaJXhYawnA3UmARpiYj5ooJZiUoxFRtK3X6pgNPv+IZVPcnwbOl6f+aBaO1CNvPW9n9LmCp01nuSaTRF2YxHqZ8DYQT6WsXT+RD6eUztwYLZ8rM+rcPxamv1VQzFUkzFXvkiVrySGQgJNvXHJAxiU3/NwiC03rSf05VBaPtu/Z7/B8Yn/w7eguloAAAAAElFTkSuQmCC');
  }

  div.callout-note.callout-style-default .callout-caption {
    background-color: #dae6fb
  }

  div.callout-important {
    border-left-color: #d9534f !important;
  }

  div.callout-important .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAEKklEQVRYCcVXTWhcVRS+575MJym48A+hSRFr00ySRQhURRfd2HYjk2SSTokuBCkU2o0LoSKKraKIBTcuFCoidGFD08nkBzdREbpQ1EDNIv8qSGMFUboImMSZd4/f9zJv8ibJMC8xJQfO3HPPPef7zrvvvnvviIkpC9nsw0UttFunbUhpFzFtarSd6WJkStVMw5xyVqYTvkwfzuf/5FgtkVoB0729j1rjXwThS7Vio+Mo6DNnvLfahoZ+i/o32lULuJ3NNiz7q6+pyAUkJaFF6JwaM2lUJlV0MlnQn5aTRbEu0SEqHUa0A4AdiGuB1kFXRfVyg5d87+Dg4DL6m2TLAub60ilj7A1Ec4odSAc8X95sHh7+ZRPCFo6Fnp7HfU/fBng/hi10CjCnWnJjsxvDNxWw0NfV6Rv5GgP3I3jGWXumdTD/3cbEOP2ZbOZp69yniG3FQ9z1jD7bnBu9Fc2tKGC2q+uAJOQHBDRiZX1x36o7fWBs7J9ownbtO+n0/qWkvW7UPIfc37WgT6ZGR++EOJyeQDSb9UB+DZ1G6DdLDzyS+b/kBCYGsYgJbSQHuThGKRcw5xdeQf8YdNHsc6ePXrlSYMBuSIAFTGAtQo+VuALo4BX83N190NWZWbynBjhOHsmNfFWLeL6v+ynsA58zDvvAC8j5PkbOcXCMg2PZFk3q8MjI7WAG/Dp9AwP7jdGBOOQkAvlFUB+irtm16I1Zw9YBcpGTGXYmk3kQIC/Cds55l+iMI3jqhjAuaoe+am2Jw5GT3Nbz3CkE12NavmzN5+erJW7046n/CH1RO/RVa8lBLozXk9uqykkGAyRXLWlLv5jyp4RFsG5vGVzpDLnIjTWgnRy2Rr+tDKvRc7Y8AyZq10jj8DqXdnIRNtFZb+t/ZRtXcDiVnzpqx8mPcDWxgARUqx0W1QB9MeUZiNrV4qP+Ehc+BpNgATsTX8ozYKL2NtFYAHc84fG7ndxUPr+AR/iQSns7uSUufAymwDOb2+NjK27lEFocm/EE2WpyIy/Hi66MWuMKJn8RvxIcj87IM5Vh9663ziW36kR0HNenXuxmfaD8JC7tfKbrhFr7LiZCrMjrzTeGx+PmkosrkNzW94ObzwocJ7A1HokLolY+AvkTiD/q1H0cN48c5EL8Crkttsa/AXQVDmutfyku0E7jShx49XqV3MFK8IryDhYVbj7Sj2P2eBxwcXoe8T8idsKKPRcnZw1b+slFTubwUwhktrfnAt7J++jwQtLZcm3sr9LQrjRzz6cfMv9aLvgmnAGvpoaGLxM4mAEaLV7iAzQ3oU0IvD5x9ix3yF2RAAuYAOO2f7PEFWCXZ4C9Pb2UsgDeVnFSpbFK7/IWu7TPTvBqzbGdCHOJQSxiEjt6IyZmxQyEJHv6xyQsYk//moVFsN2zP6fRImjfq7/n/wFDguUQFNEwugAAAABJRU5ErkJggg==');
  }

  div.callout-important.callout-style-default .callout-caption {
    background-color: #f7dddc
  }

  div.callout-warning {
    border-left-color: #f0ad4e !important;
  }

  div.callout-warning .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAAETklEQVRYCeVWW2gcVRg+58yaTUnizqbipZeX4uWhBEniBaoUX1Ioze52t7sRq6APio9V9MEaoWlVsFasRq0gltaAPuxms8lu0gcviE/FFOstVbSIxgcv6SU7EZqmdc7v9+9mJtNks51NTUH84ed889/PP+cmxP+d5FIbMJmNbpREu4WUkiTtCicKny0l1pIKmBzovF2S+hIJHX8iEu3hZJ5lNZGqyRrGSIQpq15AzF28jgpeY6yk6GVdrfFqdrD6Iw+QlB8g0YS2g7dyQmXM/IDhBhT0UCiRf59lfqmmDvzRt6kByV/m4JjtzuaujMUM2c5Z2d6JdKrRb3K2q6mA+oYVz8JnDdKPmmNthzkAk/lN63sYPgevrguc72aZX/L9C6x09GYyxBgCX4NlvyGUHOKELlm5rXeR1kchuChJt4SSwyddZRXgvwMGvYo4QSlk3/zkHD8UHxwVJA6zjZZqP8v8kK8OWLnIZtLyCAJagYC4rTGW/9Pqj92N/c+LUaAj27movwbi19tk/whRCIE7Q9vyI6yvRpftAKVTdUjOW40X3h5OXsKCdmFcx0xlLJoSuQngnrJe7Kcjm4OMq9FlC7CMmScQANuNvjfP3PjGXDBaUQmbp296S5L4DrpbrHN1T87ZVEZVCzg1FF0Ft+dKrlLukI+/c9ENo+TvlTDbYFvuKPtQ9+l052rXrgKoWkDAFnvh0wTOmYn8R5f4k/jN/fZiCM1tQx9jQQ4ANhqG4hiL0qIFTGViG9DKB7GYzgubnpofgYRwO+DFjh0Zin2m4b/97EDkXkc+f6xYAPX0KK2I/7fUQuwzuwo/L3AkcjugPNixC8cHf0FyPjWlItmLxWw4Ou9YsQCr5fijMGoD/zpdRy95HRysyXA74MWOnscpO4j2y3HAVisw85hX5+AFBRSHt4ShfLFkIMXTqyKFc46xdzQM6XbAi702a7sy04J0+feReMFKp5q9esYLCqAZYw/k14E/xcLLsFElaornTuJB0svMuJINy8xkIYuL+xPAlWRceH6+HX7THJ0djLUom46zREu7tTkxwmf/FdOZ/sh6Q8qvEAiHpm4PJ4a/doJe0gH1t+aHRgCzOvBvJedEK5OFE5jpm4AGP2a8Dxe3gGJ/pAutug9Gp6he92CsSsWBaEcxGx0FHytmIpuqGkOpldqNYQK8cSoXvd+xLxXADw0kf6UkJNFtdo5MOgaLjiQOQHcn+A6h5NuL2s0qsC2LOM75PcF3yr5STuBSAcGG+meA14K/CI21HcS4LBT6tv0QAh8Dr5l93AhZzG5ZJ4VxAqdZUEl9z7WJ4aN+svMvwHHL21UKTd1mqvChH7/Za5xzXBBKrUcB0TQ+Ulgkfbi/H/YT5EptrGzsEK7tR1B7ln9BBwckYfMiuSqklSznIuoIIOM42MQO+QnduCoFCI0bpkzjCjddHPN/F+2Yu+sd9bKNpVwHhbS3LluK/0zgfwD0xYI5dXuzlQAAAABJRU5ErkJggg==');
  }

  div.callout-warning.callout-style-default .callout-caption {
    background-color: #fcefdc
  }

  div.callout-tip {
    border-left-color: #02b875 !important;
  }

  div.callout-tip .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAADr0lEQVRYCe1XTWgTQRj9ZjZV8a9SPIkKgj8I1bMHsUWrqYLVg4Ue6v9BwZOxSYsIerFao7UiUryIqJcqgtpimhbBXoSCVxUFe9CTiogUrUp2Pt+3aUI2u5vdNh4dmMzOzHvvezuz8xNFM0mjnbXaNu1MvFWRXkXEyE6aYOYJpdW4IXuA4r0fo8qqSMDBU0v1HJUgVieAXxzCsdE/YJTdFcVIZQNMyhruOMJKXYFoLfIfIvVIMWdsrd+Rpd86ZmyzzjJmLStqRn0v8lzkb4rVIXvnpScOJuAn2ACC65FkPzEdEy4TPWRLJ2h7z4cArXzzaOdKlbOvKKX25Wl00jSnrwVxAg3o4dRxhO13RBSdNvH0xSARv3adTXbBdTf64IWO2vH0LT+cv4GR1DJt+DUItaQogeBX/chhbTBxEiZ6gftlDNXTrvT7co4ub5A6gp9HIcHvzTa46OS5fBeP87Qm0fQkr4FsYgVQ7Qg+ZayaDg9jhg1GkWj8RG6lkeSacrrHgDaxdoBiZPg+NXV/KifMuB6//JmYH4CntVEHy/keA6x4h4CU5oFy8GzrBS18cLJMXcljAKB6INjWsRcuZBWVaS3GDrqB7rdapVIeA+isQ57Eev9eCqzqOa81CY05VLd6SamW2wA2H3SiTbnbSxmzfp7WtKZkqy4mdyAlGx7ennghYf8voqp9cLSgKdqNfa6RdRsAAkPwRuJZNbpByn+RrJi1RXTwdi8RQF6ymDwGMAtZ6TVE+4uoKh+MYkcLsT0Hk8eAienbiGdjJHZTpmNjlbFJNKDVAp2fJlYju6IreQxQ08UJDNYdoLSl6AadO+fFuCQqVMB1NJwPm69T04Wv5WhfcWyfXQB+wXRs1pt+nCknRa0LVzSA/2B+a9+zQJadb7IyyV24YAxKp2Jqs3emZTuNnKxsah+uabKbMk7CbTgJx/zIgQYErIeTKRQ9yD9wxVof5YolPHqaWo7TD6tJlh7jQnK5z2n3+fGdggIOx2kaa2YI9QWarc5Ce1ipNWMKeSG4DysFF52KBmTNMmn5HqCFkwy34rDg05gDwgH3bBi+sgFhN/e8QvRn8kbamCOhgrZ9GJhFDgfcMHzFb6BAtjKpFhzTjwv1KCVuxHvCbsSiEz4CANnj84cwHdFXAbAOJ4LTSAawGWFn5tDhLMYz6nWeU2wJfIhmIJBefcd/A5FWQWGgrWzyORZ3Q6HuV+Jf0Bj+BTX69fm1zWgK7By1YTXchFDORywnfQ7GpzOo6S+qECrsx2ifVQAAAABJRU5ErkJggg==');
  }

  div.callout-tip.callout-style-default .callout-caption {
    background-color: #ccf1e3
  }

  div.callout-caution {
    border-left-color: #fd7e14 !important;
  }

  div.callout-caution .callout-icon::before {
    background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAAXNSR0IArs4c6QAAAERlWElmTU0AKgAAAAgAAYdpAAQAAAABAAAAGgAAAAAAA6ABAAMAAAABAAEAAKACAAQAAAABAAAAIKADAAQAAAABAAAAIAAAAACshmLzAAACV0lEQVRYCdVWzWoUQRCuqp2ICBLJXgITZL1EfQDBW/bkzUMUD7klD+ATSHBEfAIfQO+iXsWDxJsHL96EHAwhgzlkg8nBg25XWb0zIb0zs9muYYWkoKeru+vn664fBqElyZNuyh167NXJ8Ut8McjbmEraKHkd7uAnAFku+VWdb3reSmRV8PKSLfZ0Gjn3a6Xlcq9YGb6tADjn+lUfTXtVmaZ1KwBIvFI11rRXlWlatwIAAv2asaa9mlB9wwygiDX26qaw1yYPzFXg2N1GgG0FMF8Oj+VIx7E/03lHx8UhvYyNZLN7BwSPgekXXLribw7w5/c8EF+DBK5idvDVYtEEwMeYefjjLAdEyQ3M9nfOkgnPTEkYU+sxMq0BxNR6jExrAI31H1rzvLEfRIdgcv1XEdj6QTQAS2wtstEALLG1yEZ3QhH6oDX7ExBSFEkFINXH98NTrme5IOaaA7kIfiu2L8A3qhH9zRbukdCqdsA98TdElyeMe5BI8Rs2xHRIsoTSSVFfCFCWGPn9XHb4cdobRIWABNf0add9jakDjQJpJ1bTXOJXnnRXHRf+dNL1ZV1MBRCXhMbaHqGI1JkKIL7+i8uffuP6wVQAzO7+qVEbF6NbS0LJureYcWXUUhH66nLR5rYmva+2tjRFtojkM2aD76HEGAD3tPtKM309FJg5j/K682ywcWJ3PASCcycH/22u+Bh7Aa0ehM2Fu4z0SAE81HF9RkB21c5bEn4Dzw+/qNOyXr3DCTQDMBOdhi4nAgiFDGCinIa2owCEChUwD8qzd03PG+qdW/4fDzjUMcE1ZpIAAAAASUVORK5CYII=');
  }

  div.callout-caution.callout-style-default .callout-caption {
    background-color: #ffe5d0
  }

  </style>
  <style type="text/css">
    .reveal div.sourceCode {
      margin: 0;
      overflow: auto;
    }
    .reveal div.hanging-indent {
      margin-left: 1em;
      text-indent: -1em;
    }
    .reveal .slide:not(.center) {
      height: 100%;
    }
    .reveal .slide.scrollable {
      overflow-y: auto;
    }
    .reveal .footnotes {
      height: 100%;
      overflow-y: auto;
    }
    .reveal .slide .absolute {
      position: absolute;
      display: block;
    }
    .reveal .footnotes ol {
      counter-reset: ol;
      list-style-type: none; 
      margin-left: 0;
    }
    .reveal .footnotes ol li:before {
      counter-increment: ol;
      content: counter(ol) ". "; 
    }
    .reveal .footnotes ol li > p:first-child {
      display: inline-block;
    }
    .reveal .slide ul,
    .reveal .slide ol {
      margin-bottom: 0.5em;
    }
    .reveal .slide ul li,
    .reveal .slide ol li {
      margin-top: 0.4em;
      margin-bottom: 0.2em;
    }
    .reveal .slide ul[role="tablist"] li {
      margin-bottom: 0;
    }
    .reveal .slide ul li > *:first-child,
    .reveal .slide ol li > *:first-child {
      margin-block-start: 0;
    }
    .reveal .slide ul li > *:last-child,
    .reveal .slide ol li > *:last-child {
      margin-block-end: 0;
    }
    .reveal .slide .columns:nth-child(3) {
      margin-block-start: 0.8em;
    }
    .reveal blockquote {
      box-shadow: none;
    }
    .reveal .tippy-content>* {
      margin-top: 0.2em;
      margin-bottom: 0.7em;
    }
    .reveal .tippy-content>*:last-child {
      margin-bottom: 0.2em;
    }
    .reveal .slide > img.stretch.quarto-figure-center,
    .reveal .slide > img.r-stretch.quarto-figure-center {
      display: block;
      margin-left: auto;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-left,
    .reveal .slide > img.r-stretch.quarto-figure-left  {
      display: block;
      margin-left: 0;
      margin-right: auto; 
    }
    .reveal .slide > img.stretch.quarto-figure-right,
    .reveal .slide > img.r-stretch.quarto-figure-right  {
      display: block;
      margin-left: auto;
      margin-right: 0; 
    }
  </style>
</head>
<body class="quarto-light">
  <div class="reveal">
    <div class="slides">

<section id="title-slide" class="center">
  <h1 class="title">KM생존곡선, 로그순위검정</h1>
  <p class="author">문건웅</p>
</section>

<section id="kaplan-meierkm-생존곡선" class="slide level2">
<h2>Kaplan-Meier(KM) 생존곡선</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb1"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1"></a><span class="fu">library</span>(autoReg)</span>
<span id="cb1-2"><a href="#cb1-2"></a><span class="fu">library</span>(survival)</span>
<span id="cb1-3"><a href="#cb1-3"></a><span class="fu">library</span>(survminer)</span>
<span id="cb1-4"><a href="#cb1-4"></a><span class="fu">library</span>(howto)</span>
<span id="cb1-5"><a href="#cb1-5"></a><span class="fu">library</span>(flextable)</span>
<span id="cb1-6"><a href="#cb1-6"></a><span class="fu">library</span>(ftExtra)</span>
<span id="cb1-7"><a href="#cb1-7"></a><span class="fu">library</span>(tidyverse)</span>
<span id="cb1-8"><a href="#cb1-8"></a></span>
<span id="cb1-9"><a href="#cb1-9"></a>data<span class="ot">=</span><span class="fu">subset</span>(anderson,rx<span class="sc">==</span><span class="dv">0</span>)  <span class="do">## 입력할 때 등호가 두 개("==")인 것을 주의 </span></span>
<span id="cb1-10"><a href="#cb1-10"></a>data</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>   time status sex logWBC rx
1    35      0   1   1.45  0
2    34      0   1   1.47  0
3    32      0   1   2.20  0
4    32      0   1   2.53  0
5    25      0   1   1.78  0
6    23      1   1   2.57  0
7    22      1   1   2.32  0
8    20      0   1   2.01  0
9    19      0   0   2.05  0
10   17      0   0   2.16  0
11   16      1   1   3.60  0
12   13      1   0   2.88  0
13   11      0   0   2.60  0
14   10      0   0   2.70  0
15   10      1   0   2.96  0
16    9      0   0   2.80  0
17    7      1   0   4.43  0
18    6      0   0   3.20  0
19    6      1   0   2.31  0
20    6      1   1   4.06  0
21    6      1   0   3.28  0</code></pre>
</div>
</div>
</section>
<section id="중도절단자료-표시" class="slide level2">
<h2>중도절단자료 표시</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb3"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1"></a>data<span class="sc">$</span>time</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 35 34 32 32 25 23 22 20 19 17 16 13 11 10 10  9  7  6  6  6  6</code></pre>
</div>
</div>
<div class="fragment">
<p><br></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb5"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1"></a><span class="fu">with</span>(data,<span class="fu">Surv</span>(time,status))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code> [1] 35+ 34+ 32+ 32+ 25+ 23  22  20+ 19+ 17+ 16  13  11+ 10+ 10   9+  7   6+  6 
[20]  6   6 </code></pre>
</div>
</div>
</div>
</section>
<section id="평균생존시간bart" class="slide level2">
<h2>평균생존시간(<span class="math inline">\(\bar{T}\)</span>)</h2>
<ul>
<li>평균생존시간(<span class="math inline">\(\bar{T}\)</span>)은 중도절단을 고려하지 않고 생존시간의 평균을 계산한다.</li>
<li>중도절단된 자료는 정확한 생존시간을 알 수 없으므로 실제 생존시간은 평균생존기간보다 길다.</li>
<li>평균위험률(average hazard rate, <span class="math inline">\(\bar{h}\)</span>)은 전체 실패 수를 생존시간의 합계로 나눈 값이다.</li>
</ul>
<div class="fragment">
<div class="cell">
<div class="sourceCode cell-code" id="cb7"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb7-1"><a href="#cb7-1"></a>anderson <span class="sc">%&gt;%</span> </span>
<span id="cb7-2"><a href="#cb7-2"></a>  <span class="fu">group_by</span>(rx) <span class="sc">%&gt;%</span></span>
<span id="cb7-3"><a href="#cb7-3"></a>  <span class="fu">summarize</span>(<span class="at">T=</span><span class="fu">mean</span>(time), <span class="at">h=</span><span class="fu">sum</span>(status)<span class="sc">/</span><span class="fu">sum</span>(time))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code># A tibble: 2 × 3
     rx     T      h
  &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt;
1     0 17.1  0.0251
2     1  8.67 0.115 </code></pre>
</div>
</div>
</div>
</section>
<section id="median-survival" class="slide level2">
<h2>median survival</h2>
<p>median survival은 생존률이 50% 인 시간이다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb9"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb9-1"><a href="#cb9-1"></a>fit<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status)<span class="sc">~</span><span class="dv">1</span>,<span class="at">data=</span>data)</span>
<span id="cb9-2"><a href="#cb9-2"></a>fit</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call: survfit(formula = Surv(time, status) ~ 1, data = data)

      n events median 0.95LCL 0.95UCL
[1,] 21      9     23      16      NA</code></pre>
</div>
</div>
</section>
<section id="각-시기별-생존률" class="slide level2">
<h2>각 시기별 생존률</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb11"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb11-1"><a href="#cb11-1"></a><span class="fu">summary</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call: survfit(formula = Surv(time, status) ~ 1, data = data)

 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    6     21       3    0.857  0.0764        0.720        1.000
    7     17       1    0.807  0.0869        0.653        0.996
   10     15       1    0.753  0.0963        0.586        0.968
   13     12       1    0.690  0.1068        0.510        0.935
   16     11       1    0.627  0.1141        0.439        0.896
   22      7       1    0.538  0.1282        0.337        0.858
   23      6       1    0.448  0.1346        0.249        0.807</code></pre>
</div>
</div>
</section>
<section id="생존률의-95-신뢰구간" class="slide level2">
<h2>생존률의 95% 신뢰구간</h2>
<p><span class="math display">\[\hat{S}(t) \pm 1.96 \times \sqrt{\hat{Var}(\hat{S}(t))}\]</span> 으로 계산하며 생존률의 추정 분산 <span class="math inline">\(\hat{Var}(\hat{S}(t))\)</span>는 Greenwood 식(Greenwood’s formula)을 사용하여 계산한 것이다.</p>
<p><span class="math display">\[\hat{Var}(\hat{S}(t)=(\hat{S}(t))^2\times\sum_{f:t_{(f)}\leq t}[\frac{m_f}{n_f(n_f-m_f)}]\]</span></p>
</section>
<section id="생존률의-계산" class="slide level2">
<h2>생존률의 계산</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb13"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb13-1"><a href="#cb13-1"></a><span class="fu">howto</span>(fit) <span class="sc">%&gt;%</span> </span>
<span id="cb13-2"><a href="#cb13-2"></a>  <span class="fu">highlight</span>(<span class="at">i=</span><span class="dv">1</span>,<span class="at">j=</span><span class="dv">6</span>,<span class="at">color=</span><span class="st">"yellow"</span>) <span class="sc">%&gt;%</span></span>
<span id="cb13-3"><a href="#cb13-3"></a>  <span class="fu">highlight</span>(<span class="at">i=</span><span class="dv">2</span>,<span class="at">j=</span><span class="fu">c</span>(<span class="dv">2</span>,<span class="dv">3</span>,<span class="dv">5</span>),<span class="at">color=</span><span class="st">"yellow"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>

<img data-src="chap3_files/figure-revealjs/unnamed-chunk-8-1.png" width="960" class="r-stretch"></section>
<section id="주째-생존률-hats6-추정" class="slide level2">
<h2>6주째 생존률 <span class="math inline">\(\hat{S}(6)\)</span> 추정</h2>
<ul>
<li>6주째에 3명에서 event가 발생</li>
<li>6주 째의 n.risk는 21명</li>
<li>이 중 event가 발생한 3명을 제외하고 18명이 생존</li>
</ul>
<p>따라서 6주째 생존률은 다음과 같다. <span class="math inline">\(\hat{S}(6)\)</span> 은 <span class="math inline">\(S(6)\)</span>의 추정량이라는 뜻이다.</p>
<p><span class="math display">\[\hat{S}(6)=1 \times \frac{(21-3)}{21} = 1\times\frac{18}{21}=0.8571\]</span></p>
</section>
<section id="주째-생존률-hats7-추정" class="slide level2">
<h2>7주째 생존률 <span class="math inline">\(\hat{S}(7)\)</span> 추정</h2>
<p>7주 째의 number at risk는 6주째에 3명 실패(event 발생), 1명 중도절단되어 17명이고 생존률은 <span class="math inline">\(0.8571 \times (16 \div 17)=0.8067\)</span> 이 된다. 이 값은 다음과 같다.</p>
<p><span class="math display">\[\hat{S}(7)=1\times \frac{18}{21} \times \frac{16}{17}=0.8067\]</span></p>
<div class="fragment">
<h3 id="주째-생존률은-다음과-같이-계산된다.">13주째 생존률은 다음과 같이 계산된다.</h3>
<p><span class="math display">\[\hat{S}(13)=1\times \frac{18}{21} \times \frac{16}{17}\times\frac{14}{15}\times \frac{11}{12}=0.6902\]</span></p>
</div>
</section>
<section id="생존률그래프" class="slide level2">
<h2>생존률그래프</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb14"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb14-1"><a href="#cb14-1"></a><span class="fu">plot</span>(fit)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-9-1.png" width="960" class="r-stretch"></section>
<section id="median-survival-1" class="slide level2">
<h2>Median survival</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb15"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb15-1"><a href="#cb15-1"></a><span class="fu">plot</span>(fit)</span>
<span id="cb15-2"><a href="#cb15-2"></a>median<span class="ot">=</span>fit<span class="sc">$</span>time[<span class="fu">min</span>(<span class="fu">which</span>(fit<span class="sc">$</span>surv<span class="sc">&lt;</span><span class="fl">0.5</span>))]</span>
<span id="cb15-3"><a href="#cb15-3"></a><span class="fu">arrows</span>(<span class="dv">0</span>,<span class="fl">0.5</span>,median,<span class="fl">0.5</span>,<span class="at">angle=</span><span class="dv">15</span>,<span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb15-4"><a href="#cb15-4"></a><span class="fu">arrows</span>(median,<span class="fl">0.5</span>,median,<span class="dv">0</span>,<span class="at">angle=</span><span class="dv">15</span>,<span class="at">col=</span><span class="st">"red"</span>)</span>
<span id="cb15-5"><a href="#cb15-5"></a><span class="fu">text</span>(median,<span class="dv">0</span>,median,<span class="at">pos=</span><span class="dv">1</span>,<span class="at">offset=</span><span class="fl">0.1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-10-1.png" width="960" class="r-stretch"></section>
<section id="ggsurvplot" class="slide level2">
<h2>ggsurvplot</h2>
<p>survminer 패키지의 ggsurvplot()을 이용하면 보다 보기좋은 그래프를 얻을 수 있다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb16"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb16-1"><a href="#cb16-1"></a><span class="fu">library</span>(survminer)</span>
<span id="cb16-2"><a href="#cb16-2"></a><span class="fu">ggsurvplot</span>(fit,<span class="at">data=</span>data)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-11-1.png" width="960" class="r-stretch"></section>
<section id="생존률과-조건부확률" class="slide level2">
<h2>생존률과 조건부확률</h2>
<p>6주째에 3명에서 event가 발생하였다. 따라서 생존률은 <span class="math inline">\(1.0 \times (21-3) \div 21 = 18\div21=0.8571\)</span>이 된다. 이를 달리 표현하면 6주까지 살아있는 사람 중 6주를 초과하여 살아있는 비율이다.</p>
<p><span class="math display">\[\hat{S}(6)= P(T&gt;6 | T\geq 6) = \frac{18}{21} \]</span></p>
</section>
<section id="조건부확률" class="slide level2">
<h2>조건부확률</h2>
<p>A라는 사건이 일어날 확률을 <span class="math inline">\(P(A)\)</span>, B라는 사건이 일어날 확률을 <span class="math inline">\(P(B)\)</span>라고 하면 사건 B가 일어났다는 가정하에 사건 A가 일어날 조건부확률을 <span class="math inline">\(P(A|B)\)</span>로 표기한다. 이 조건부확률은 다음과 같다.</p>
<p><span class="math display">\[P(A|B)=\frac{P(A\cap B)}{P(B)}\]</span></p>
<p>A와 B가 동시에 일어날 확률 <span class="math inline">\(P(A\cap B)\)</span>는 다음과 같다.</p>
<p><span class="math display">\[P(A \cap B)=P(A|B)\times P(B)= P(B|A)\times P(A)\]</span></p>
</section>
<section id="section" class="slide level2">
<h2></h2>
<p>따라서 조건부확률 <span class="math inline">\(P(A|B)\)</span>를 다음과 같이 쓸 수 있다..</p>
<p><span class="math display">\[P(A|B)=\frac{P(A\cap B)}{P(B)}=\frac{P(A) \times P(B|A)}{P(B)}\]</span></p>
<p>위에서 <span class="math inline">\(\hat{S}(6)= P(T&gt;6 | T\geq 6)\)</span>는 조건부 확률로 <span class="math inline">\(T&gt;6\)</span>인 경우 항상 <span class="math inline">\(T \geq 6\)</span> 이므로 다음과 같이 쓸 수 있다.</p>
<span class="math display">\[\begin{align*}
P(T&gt;6\  |\  T\geq 6)&amp;=\frac{P(T &gt;6)\times P(T \geq6\ |\ T&gt; 6)}{P(T\geq 6)}\\
&amp;=\frac{P(T&gt;6)}{P(T \geq6)}=\frac{18}{21}
\end{align*}\]</span>
</section>
<section id="k-m-생존율의-일반화" class="slide level2">
<h2>K-M 생존율의 일반화</h2>
<p>위에서 살펴본 K-M 생존률을 일반화하면 다음과 같다. f번째 시간 <span class="math inline">\(t_f\)</span>의 생존률은 그 시간 전까지의 추정생존율에 조건부확률인 <span class="math inline">\(P(T &gt; t_{(f)}\ |\ P \geq t_{(f)})\)</span>을 곱한 값이 된다.</p>
<p><span class="math display">\[\hat{S}(t_{(f)})=\hat{S}(t_{(f-1))}\times\hat{P}(T&gt;t_{(f)}\ |\ T \geq t_{(f)})\]</span> K-M 생존률을 구하는 승법극한추정량(product limit estimator)은 다음과 같다.</p>
<p><span class="math display">\[\hat{S}(t_{(f)})=\prod_{i=1}^{f}\hat{P}(T&gt;t_{(f)}\ |\ T \geq t_{(f)})\]</span></p>
</section>
<section id="연습문제" class="slide level2">
<h2>연습문제</h2>
<p>anderson1 데이터를 이용해 생존곡선을 구하고 있다. 앞절에서는 설명의 편의상 치료군만을 대상으로 생존률을 구하였으나 치료군, 대조군 모두에서 생존률을 구하고자 한다. 다음 표에서 빈칸을 채우시오.</p>

<img data-src="chap3_files/figure-revealjs/unnamed-chunk-12-1.png" width="960" class="r-stretch"></section>
<section id="section-1" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb17"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb17-1"><a href="#cb17-1"></a>fit<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status)<span class="sc">~</span>rx,<span class="at">data=</span>anderson1)</span>
<span id="cb17-2"><a href="#cb17-2"></a><span class="fu">howto</span>(fit) <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-13-1.png" width="960" class="r-stretch"></section>
<section id="로그순위검정" class="slide level2">
<h2>로그순위검정</h2>
<ul>
<li>두 군간의 KM 생존곡선비교</li>
<li>세 군 이상인 경우 로그순위검정</li>
<li>로그순위검정의 대안</li>
<li>층화된 로그순위검정</li>
</ul>
</section>
<section id="로그순위검정-1" class="slide level2">
<h2>로그순위검정</h2>
<ul>
<li>두 개의 생존곡선이 통계적으로 동등한지 검정</li>
<li>두 개의 생존곡선을 전체적으로 볼 때 true survival curve가 다르다는 근거가 없다는 뜻이다.</li>
<li>두 개의 생존곡선을 전체적을 비교하기 위해 각각의 시간에서 두 군의 기대값과 관찰값의 차이를 구하여 검정통계량을 계산하는 카이제곱 검정의 일종</li>
</ul>
</section>
<section id="section-2" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb18"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb18-1"><a href="#cb18-1"></a>fit1<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status)<span class="sc">~</span>rx,<span class="at">data=</span>anderson1)</span>
<span id="cb18-2"><a href="#cb18-2"></a><span class="fu">summary</span>(fit1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call: survfit(formula = Surv(time, status) ~ rx, data = anderson1)

                rx=Treatment 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    6     21       3    0.857  0.0764        0.720        1.000
    7     17       1    0.807  0.0869        0.653        0.996
   10     15       1    0.753  0.0963        0.586        0.968
   13     12       1    0.690  0.1068        0.510        0.935
   16     11       1    0.627  0.1141        0.439        0.896
   22      7       1    0.538  0.1282        0.337        0.858
   23      6       1    0.448  0.1346        0.249        0.807

                rx=Control 
 time n.risk n.event survival std.err lower 95% CI upper 95% CI
    1     21       2   0.9048  0.0641      0.78754        1.000
    2     19       2   0.8095  0.0857      0.65785        0.996
    3     17       1   0.7619  0.0929      0.59988        0.968
    4     16       2   0.6667  0.1029      0.49268        0.902
    5     14       2   0.5714  0.1080      0.39455        0.828
    8     12       4   0.3810  0.1060      0.22085        0.657
   11      8       2   0.2857  0.0986      0.14529        0.562
   12      6       2   0.1905  0.0857      0.07887        0.460
   15      4       1   0.1429  0.0764      0.05011        0.407
   17      3       1   0.0952  0.0641      0.02549        0.356
   22      2       1   0.0476  0.0465      0.00703        0.322
   23      1       1   0.0000     NaN           NA           NA</code></pre>
</div>
</div>
</section>
<section id="section-3" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb20"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb20-1"><a href="#cb20-1"></a><span class="fu">ggsurvplot</span>(fit1,<span class="at">data=</span>anderson1,<span class="at">pval=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-15-1.png" width="960" class="r-stretch"></section>
<section id="로그순위검정-2" class="slide level2">
<h2>로그순위검정</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb21"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb21-1"><a href="#cb21-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(time,status)<span class="sc">~</span>rx,<span class="at">data=</span>anderson1)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(time, status) ~ rx, data = anderson1)

              N Observed Expected (O-E)^2/E (O-E)^2/V
rx=Treatment 21        9     19.3      5.46      16.8
rx=Control   21       21     10.7      9.77      16.8

 Chisq= 16.8  on 1 degrees of freedom, p= 4e-05 </code></pre>
</div>
</div>
</section>
<section id="section-4" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb23"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb23-1"><a href="#cb23-1"></a>ft<span class="ot">=</span><span class="fu">howto2</span>(fit1)</span>
<span id="cb23-2"><a href="#cb23-2"></a>ft <span class="sc">%&gt;%</span> <span class="fu">highlight</span>(<span class="at">i=</span><span class="dv">2</span>,<span class="at">j=</span><span class="fu">c</span>(<span class="dv">2</span><span class="sc">:</span><span class="dv">7</span>)) <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-17-1.png" width="960" class="r-stretch"></section>
<section id="section-5" class="slide level2">
<h2></h2>
<ul>
<li>2주째에 n.risk는 대조군과 실험군에서 각각 19,21명이며 실패는 대조군에서 2, 치료군에서 0이 관찰되었다.</li>
<li>실패의 기대값은 대조군은 <span class="math inline">\((n1/(n1+n2))\times(n1+n2)\)</span>이며 치료군은 <span class="math inline">\((n2/(n1+n2))\times(n1+n2)\)</span> 이다.</li>
<li>관찰값-기댓값의 추정분산은 다음 공식으로 계산한다.</li>
</ul>
<p><span class="math display">\[Var(O_i-E_i)=\frac{n1n2(f1+f2)(n1+n2-f1-f2)}{(n1+n2)^2(n1-n2-1)}\]</span></p>
</section>
<section id="로그순위-검정량" class="slide level2">
<h2>로그순위 검정량</h2>
<p><span class="math display">\[\begin{align*}
Log-rank\ statistic &amp;= \frac{(O_2-E_2)^2}{Var(O_2-E_2)}\\
&amp; =\frac{(-10.25)^2}{6.26}\approx16.79\\
\end{align*}\]</span></p>
<div class="cell">
<div class="sourceCode cell-code" id="cb24"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb24-1"><a href="#cb24-1"></a><span class="fu">attr</span>(ft,<span class="st">"x2"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 16.79294</code></pre>
</div>
<div class="sourceCode cell-code" id="cb26"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb26-1"><a href="#cb26-1"></a><span class="fu">pchisq</span>(<span class="fu">attr</span>(ft,<span class="st">"x2"</span>),<span class="at">df=</span><span class="dv">1</span>,<span class="at">lower.tail=</span><span class="cn">FALSE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>[1] 4.168809e-05</code></pre>
</div>
</div>
</section>
<section id="세-군-이상인-경우-로그순위검정" class="slide level2">
<h2>세 군 이상인 경우 로그순위검정</h2>
<ul>
<li>세 군 이상인 경우의 로그순위 검정도 survdiff()함수를 통해 시행할 수 있다.</li>
<li>로그순위 검정의 귀무가설(Null hypothesis: <span class="math inline">\(H_0\)</span>)은 “모든 생존곡선이 동등하다” 이다.</li>
<li>세 군 이상의 로그 순위검정을 위하여는 각 군의 관찰값과 기대값의 합의 분산과 공분산을 포함하는 복잡한 수식이 사용되지만 수작업으로 계산하지는 않는다.</li>
</ul>
</section>
<section id="예제-survival-패키지의-대장암데이터" class="slide level2">
<h2>예제: survival 패키지의 대장암데이터</h2>
<ul>
<li>stage B/C의 대장암 환자의 데이터</li>
<li>관찰군(Obs(ervation))과 Lev(amisole), Lev(amisole)+5-FU 세 군의 생존을 비교한다.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb28"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb28-1"><a href="#cb28-1"></a><span class="fu">data</span>(cancer,<span class="at">package=</span><span class="st">"survival"</span>)</span>
<span id="cb28-2"><a href="#cb28-2"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(time,status)<span class="sc">~</span>rx,<span class="at">data=</span>colon)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(time, status) ~ rx, data = colon)

             N Observed Expected (O-E)^2/E (O-E)^2/V
rx=Obs     630      345      299      7.01     10.40
rx=Lev     620      333      295      4.93      7.26
rx=Lev+5FU 608      242      326     21.61     33.54

 Chisq= 33.6  on 2 degrees of freedom, p= 5e-08 </code></pre>
</div>
</div>
</section>
<section id="통계량-계산" class="slide level2">
<h2>통계량 계산</h2>
<p>다음의 근사식이 사용되는데 이 통계량은 군의 갯수-1의 자유도를 갖는 카이제곱 분포를 따른다.</p>
<p><span class="math display">\[\chi^2 \approx \sum_{i=1}^{n} \frac{(O_i-E_i)^2}{E_i}\]</span></p>
</section>
<section id="section-6" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb30"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb30-1"><a href="#cb30-1"></a>fit2<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status)<span class="sc">~</span>rx,<span class="at">data=</span>colon)</span>
<span id="cb30-2"><a href="#cb30-2"></a><span class="fu">ggsurvplot</span>(fit2,<span class="at">data=</span>colon,<span class="at">pval=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-20-1.png" width="960" class="r-stretch"></section>
<section id="로그순위검정의-대안" class="slide level2">
<h2>로그순위검정의 대안</h2>
<ul>
<li>통계량을 구할때 가중치를 주어 계산한다.</li>
<li>Wilcoxon, Tarone-Ware, Peto, Flemington-Harrington 검정 등</li>
<li>가중치를 주는 방법에 따라 초기의 실패에 더 가중치를 주기도 한다.</li>
</ul>
<p><span class="math display">\[Test\ statistic=\frac{(\sum_f w(t_f)(O_i-E_i))^2}{Var(\sum_f w(t_f)(O_i-E_i{}{}))}\]</span></p>
<p>위의 식에서 가중치 <span class="math inline">\(W(t_f)=weight\ at\ fth\ failure\ time\)</span> 으로 여러 검정 방법들은 가중치에 따라 그 결과가 달라진다.</p>
</section>
<section id="section-7" class="slide level2">
<h2></h2>
<div class="cell">
<div class="cell-output-display">
<table>
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead>
<tr class="header">
<th style="text-align: left;">Test Statistic</th>
<th style="text-align: left;"><span class="math inline">\(w(t_f)\)</span></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Log Lank</td>
<td style="text-align: left;">1</td>
</tr>
<tr class="even">
<td style="text-align: left;">Wilcoxon</td>
<td style="text-align: left;"><span class="math inline">\(n_f\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Tarone-Ware</td>
<td style="text-align: left;">sqrt(<span class="math inline">\(n_f\)</span>)</td>
</tr>
<tr class="even">
<td style="text-align: left;">Peto</td>
<td style="text-align: left;"><span class="math inline">\(\hat{s}(t_f)\)</span></td>
</tr>
<tr class="odd">
<td style="text-align: left;">Flemington-Harrington</td>
<td style="text-align: left;"><span class="math inline">\(\hat{S}(t_{(f-1)})^P\times [1 - \hat{S}(t_{(f-1)})]^q\)</span></td>
</tr>
</tbody>
</table>
</div>
</div>
</section>
<section id="예제-췌장암-데이터" class="slide level2">
<h2>예제: 췌장암 데이터</h2>
<ul>
<li>pfs: 병기의 진행이 없는 생존(progression free survival)</li>
<li>병기에 따른 생존곡선을 비교해본다.</li>
</ul>
<div class="cell">
<div class="sourceCode cell-code" id="cb31"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb31-1"><a href="#cb31-1"></a><span class="fu">data</span>(pancreatic2,<span class="at">package=</span><span class="st">"asaur"</span>)</span>
<span id="cb31-2"><a href="#cb31-2"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(pfs)<span class="sc">~</span>stage,<span class="at">data=</span>pancreatic2)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(pfs) ~ stage, data = pancreatic2)

          N Observed Expected (O-E)^2/E (O-E)^2/V
stage=LA  8        8     12.3      1.49      2.25
stage=M  33       33     28.7      0.64      2.25

 Chisq= 2.2  on 1 degrees of freedom, p= 0.1 </code></pre>
</div>
</div>
<p>로그순위검정에서 국소진행암(LA, locally advanced)과 전이된암(M, metastatic)의 pfs 생존곡선이 동등하지 않다는 근거는 없다고 할 수 있다.</p>
</section>
<section id="생존곡선" class="slide level2">
<h2>생존곡선</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb33"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb33-1"><a href="#cb33-1"></a>fit4<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(pfs)<span class="sc">~</span>stage,<span class="at">data=</span>pancreatic2)</span>
<span id="cb33-2"><a href="#cb33-2"></a><span class="fu">ggsurvplot</span>(fit4,<span class="at">data=</span>pancreatic2,<span class="at">pval=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-23-1.png" width="960" class="r-stretch"></section>
<section id="peto-수정에-의한-로그순위검정" class="slide level2">
<h2>Peto 수정에 의한 로그순위검정</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb34"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb34-1"><a href="#cb34-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(pfs)<span class="sc">~</span>stage,<span class="at">data=</span>pancreatic2,<span class="at">rho=</span><span class="dv">1</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(pfs) ~ stage, data = pancreatic2, rho = 1)

          N Observed Expected (O-E)^2/E (O-E)^2/V
stage=LA  8     2.34     5.88     2.128      4.71
stage=M  33    18.76    15.22     0.822      4.71

 Chisq= 4.7  on 1 degrees of freedom, p= 0.03 </code></pre>
</div>
</div>
<p>검정결과 p 값은 0.03으로 유의하다. 이 검정방법은 초기의 생존시간에 가중치를 주기 때문에 국소진행암이 초기에 생존에 유리한 것으로 나타난다.</p>
</section>
<section id="생존곡선-1" class="slide level2">
<h2>생존곡선</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb36"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb36-1"><a href="#cb36-1"></a><span class="fu">ggsurvplot</span>(fit4,<span class="at">data=</span>pancreatic2,<span class="at">pval=</span><span class="cn">TRUE</span>,<span class="at">log.rank.weights=</span><span class="st">"S1"</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-25-1.png" width="960" class="r-stretch"></section>
<section id="로그순위검정-검정량-계산" class="slide level2">
<h2>로그순위검정 검정량 계산</h2>
<p>로그순위검정을 위해 기대값을 계산하고자 한다. 다음 예에서 빈칸을 채우시오</p>

<img data-src="chap3_files/figure-revealjs/unnamed-chunk-26-1.png" width="960" class="r-stretch"></section>
<section id="section-8" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb37"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb37-1"><a href="#cb37-1"></a>fit<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(time,status)<span class="sc">~</span>x,<span class="at">data=</span>aml)</span>
<span id="cb37-2"><a href="#cb37-2"></a><span class="fu">howto2</span>(fit) <span class="sc">%&gt;%</span> <span class="fu">plot</span>()</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-27-1.png" width="960" class="r-stretch"></section>
<section id="층화된-로그순위검정" class="slide level2">
<h2>층화된 로그순위검정</h2>
<ul>
<li>두 군간의 생존곡선을 비교할 때 다른 공변량을 보정해야 할 경우 층화된 비례위험모형을 사용할 수도 있고 보정할 공변량의 수준이 적을 때는 층화된 로그순위검정을 할 수도 있다.</li>
<li>치료한 병원, 나이군, 성별 등이 층화할 변수의 예이다.</li>
<li>층화된 로그순위검정의 귀무가설은 <span class="math inline">\(H_0: h_{0j}(t)=h_{1j(t)}\ for\ j=1,2,...,G\)</span>이다.</li>
</ul>
</section>
<section id="section-9" class="slide level2">
<h2></h2>
<ul>
<li>이때 두 번 째 변수의 각 수준에 대해 스코어통계량 <span class="math inline">\(U_{0g}\)</span>와 분산 <span class="math inline">\(V_{0g}\)</span>를 계산한다.(이 때의 <span class="math inline">\(g=1,...,G\)</span>는 첫 번째 변수의 group이다). -</li>
<li>검정통계량은 <span class="math display">\[\chi^2=\frac{(\sum_{g=1}^G U_{0g})^2}{\sum_{g=1}^G V_{0g}^2}\]</span> 이며 이 통계량은 자유도가 1인 카이제곱분포를 따른다.</li>
</ul>
</section>
<section id="예제" class="slide level2">
<h2>예제</h2>
<p>asaur 패키지의 pharmacoSmoking은 금연에 관한 치료로 패치만을 사용한 군과 복합약물치료를 한 군 간의 재발(다시 흡연)까지의 시간에 관한 데이터이다. 두 군간의 생존을 비교하면 다음과 같다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb38"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb38-1"><a href="#cb38-1"></a><span class="fu">data</span>(pharmacoSmoking,<span class="at">package=</span><span class="st">"asaur"</span>)</span>
<span id="cb38-2"><a href="#cb38-2"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(ttr,relapse)<span class="sc">~</span>grp,<span class="at">data=</span>pharmacoSmoking)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(ttr, relapse) ~ grp, data = pharmacoSmoking)

                 N Observed Expected (O-E)^2/E (O-E)^2/V
grp=combination 61       37     49.9      3.36      8.03
grp=patchOnly   64       52     39.1      4.29      8.03

 Chisq= 8  on 1 degrees of freedom, p= 0.005 </code></pre>
</div>
</div>
</section>
<section id="section-10" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb40"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb40-1"><a href="#cb40-1"></a>fit<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(ttr,relapse)<span class="sc">~</span>grp,<span class="at">data=</span>pharmacoSmoking)</span>
<span id="cb40-2"><a href="#cb40-2"></a><span class="fu">ggsurvplot</span>(fit,<span class="at">data=</span>pharmacoSmoking,<span class="at">pval=</span><span class="cn">TRUE</span>,<span class="at">legend=</span><span class="fu">c</span>(<span class="fl">0.7</span>,<span class="fl">0.85</span>))</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-29-1.png" width="960" class="r-stretch"></section>
<section id="층화된-로그순위검정-1" class="slide level2">
<h2>층화된 로그순위검정</h2>
<p>나이의 영향을 보정하기 위해 ageGroup2를 사용하여 층화된 로그순위검정을 하면 다음과 같다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb41"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb41-1"><a href="#cb41-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(ttr, relapse) <span class="sc">~</span> grp<span class="sc">+</span><span class="fu">strata</span>(ageGroup2),<span class="at">data=</span>pharmacoSmoking)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(ttr, relapse) ~ grp + strata(ageGroup2), 
    data = pharmacoSmoking)

                 N Observed Expected (O-E)^2/E (O-E)^2/V
grp=combination 61       37     49.1      2.99      7.03
grp=patchOnly   64       52     39.9      3.68      7.03

 Chisq= 7  on 1 degrees of freedom, p= 0.008 </code></pre>
</div>
</div>
</section>
<section id="section-11" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb43"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb43-1"><a href="#cb43-1"></a>labs<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Combination, age 21-49"</span>,<span class="st">"Combination, age 50+"</span>,<span class="st">"patchOnly, age 21-49"</span>,<span class="st">"patchOnly, age 50+"</span>)</span>
<span id="cb43-2"><a href="#cb43-2"></a><span class="fu">ggsurvplot</span>(<span class="fu">survfit</span>(<span class="fu">Surv</span>(ttr, relapse) <span class="sc">~</span> grp<span class="sc">+</span><span class="fu">strata</span>(ageGroup2),<span class="at">data=</span>pharmacoSmoking),</span>
<span id="cb43-3"><a href="#cb43-3"></a>           <span class="at">data=</span>pharmacoSmoking,<span class="at">legend=</span><span class="fu">c</span>(<span class="fl">0.7</span>,<span class="fl">0.85</span>),<span class="at">legend.labs=</span>labs,<span class="at">pval=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-31-1.png" width="960" class="r-stretch"></section>
<section id="혼동변수의-효과" class="slide level2">
<h2>혼동변수의 효과</h2>
<ul>
<li>“Applied Survival Analysis Using R” p51-52</li>
<li>대조군과 치료군을 비교하기 위한 임상연구를 시뮬레이션한 데이터를 만든다. - 생존시간은 지수적으로 분포한다고 가정하고 질환이 아주 치명적이어서 중도절단이 없는 것으로 가정한다.</li>
<li>혼동변수로 두 가지 genotype(유전자타입)인 wild type(정상)과 mutant type(돌연변이)을 가정하고 이 중 돌연변이인 경우 상당히 나쁜 예후를 보이는 것으로 가정한다.</li>
<li>구체적으로는 대조군의 mutant인 경우 매일 0.03의 위험비를 보이고 치료하는 경우 위험을 0.55의 비율로 감소시키는 것으로 한다. 정상인 wild type에서는 mutant에 비해 위험비가 20%로 감소하는 것으로 하고 치료의 효과는 비슷한 것으로 한다.</li>
</ul>
</section>
<section id="section-12" class="slide level2">
<h2></h2>
<p>R을 이용해 네 가지 위험비를 다음과 같이 정의한다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb44"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb44-1"><a href="#cb44-1"></a>lambda.mutant<span class="fl">.0</span> <span class="ot">&lt;-</span> <span class="fl">0.03</span> </span>
<span id="cb44-2"><a href="#cb44-2"></a>lambda.mutant<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fl">0.03</span><span class="sc">*</span><span class="fl">0.55</span> </span>
<span id="cb44-3"><a href="#cb44-3"></a>lambda.wt<span class="fl">.0</span> <span class="ot">&lt;-</span> <span class="fl">0.03</span><span class="sc">*</span><span class="fl">0.2</span> </span>
<span id="cb44-4"><a href="#cb44-4"></a>lambda.wt<span class="fl">.1</span> <span class="ot">&lt;-</span> <span class="fl">0.03</span><span class="sc">*</span><span class="fl">0.2</span><span class="sc">*</span><span class="fl">0.55</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-13" class="slide level2">
<h2></h2>
<p>다음으로 무작위변수 발생기를 초기화 시키고 지수분포를 갖는 변수를 무작위로 발생시켜 geneConfounder 데이터를 만든다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb45"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb45-1"><a href="#cb45-1"></a><span class="fu">set.seed</span>(<span class="dv">4321</span>)</span>
<span id="cb45-2"><a href="#cb45-2"></a>tt.control.mutant <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="dv">25</span>, <span class="at">rate=</span>lambda.mutant<span class="fl">.0</span>) </span>
<span id="cb45-3"><a href="#cb45-3"></a>tt.treat.mutant <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="dv">125</span>, <span class="at">rate=</span>lambda.mutant<span class="fl">.1</span>) </span>
<span id="cb45-4"><a href="#cb45-4"></a>tt.control.wt <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="dv">125</span>, <span class="at">rate=</span>lambda.wt<span class="fl">.0</span>) </span>
<span id="cb45-5"><a href="#cb45-5"></a>tt.treat.wt <span class="ot">&lt;-</span> <span class="fu">rexp</span>(<span class="dv">25</span>, <span class="at">rate=</span>lambda.wt<span class="fl">.1</span>)</span>
<span id="cb45-6"><a href="#cb45-6"></a>ttAll <span class="ot">&lt;-</span> <span class="fu">c</span>(tt.control.mutant, tt.treat.mutant, tt.control.wt, </span>
<span id="cb45-7"><a href="#cb45-7"></a>           tt.treat.wt)</span>
<span id="cb45-8"><a href="#cb45-8"></a></span>
<span id="cb45-9"><a href="#cb45-9"></a>status <span class="ot">&lt;-</span> <span class="fu">rep</span>(<span class="dv">1</span>, <span class="fu">length</span>(ttAll)) </span>
<span id="cb45-10"><a href="#cb45-10"></a>genotype <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="st">"mutant"</span>, <span class="dv">150</span>), <span class="fu">rep</span>(<span class="st">"wt"</span>, <span class="dv">150</span>)) </span>
<span id="cb45-11"><a href="#cb45-11"></a>trt <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">25</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">125</span>), <span class="fu">rep</span>(<span class="dv">0</span>, <span class="dv">125</span>), <span class="fu">rep</span>(<span class="dv">1</span>, <span class="dv">25</span>))</span>
<span id="cb45-12"><a href="#cb45-12"></a></span>
<span id="cb45-13"><a href="#cb45-13"></a>geneConfounder <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(ttAll, status, trt, genotype)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</div>
</section>
<section id="section-14" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb46"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb46-1"><a href="#cb46-1"></a>geneConfounder</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>          ttAll status trt genotype
1    34.4086424      1   0   mutant
2     1.0129414      1   0   mutant
3    17.5666740      1   0   mutant
4    16.6959261      1   0   mutant
5    19.9967226      1   0   mutant
6    10.3725575      1   0   mutant
7     2.4522425      1   0   mutant
8     8.3931058      1   0   mutant
9     5.1797826      1   0   mutant
10   39.1929257      1   0   mutant
11    1.4856407      1   0   mutant
12   80.2478853      1   0   mutant
13    8.9809921      1   0   mutant
14   18.0939091      1   0   mutant
15   91.2651619      1   0   mutant
16   61.5527432      1   0   mutant
17    2.5622199      1   0   mutant
18   80.6605677      1   0   mutant
19   12.2291281      1   0   mutant
20   10.2153283      1   0   mutant
21   70.3162420      1   0   mutant
22   56.6334330      1   0   mutant
23   62.0513993      1   0   mutant
24   31.4508178      1   0   mutant
25   39.8219773      1   0   mutant
26   59.0614861      1   1   mutant
27   63.2679060      1   1   mutant
28    2.3097304      1   1   mutant
29  109.9197307      1   1   mutant
30  121.4452613      1   1   mutant
31   77.9857035      1   1   mutant
32  147.5787577      1   1   mutant
33    8.2279833      1   1   mutant
34   29.8248180      1   1   mutant
35   17.2357994      1   1   mutant
36   13.3316806      1   1   mutant
37   75.7424127      1   1   mutant
38  102.0933583      1   1   mutant
39    9.8602436      1   1   mutant
40   33.2077302      1   1   mutant
41   63.7711750      1   1   mutant
42   11.3640499      1   1   mutant
43   36.1906028      1   1   mutant
44   18.5530986      1   1   mutant
45   70.7409504      1   1   mutant
46   27.8287653      1   1   mutant
47    7.1513550      1   1   mutant
48  116.0517224      1   1   mutant
49   14.1528162      1   1   mutant
50    4.8326795      1   1   mutant
51   63.1432222      1   1   mutant
52   36.3899958      1   1   mutant
53  189.3707045      1   1   mutant
54   48.2957301      1   1   mutant
55   11.0714874      1   1   mutant
56   20.7935046      1   1   mutant
57   10.0675103      1   1   mutant
58   66.6428720      1   1   mutant
59   38.5691471      1   1   mutant
60   42.4180086      1   1   mutant
61    7.1505500      1   1   mutant
62   65.9785199      1   1   mutant
63    4.9856797      1   1   mutant
64   41.5921909      1   1   mutant
65    3.0737419      1   1   mutant
66  148.2839570      1   1   mutant
67   51.3573618      1   1   mutant
68   12.5301915      1   1   mutant
69   76.2148832      1   1   mutant
70   56.1814279      1   1   mutant
71   28.8056986      1   1   mutant
72  105.8290582      1   1   mutant
73    1.4594409      1   1   mutant
74    8.7879971      1   1   mutant
75   51.0837369      1   1   mutant
76   32.3659418      1   1   mutant
77   46.0135812      1   1   mutant
78   50.2390356      1   1   mutant
79   68.7000408      1   1   mutant
80   39.1536705      1   1   mutant
81   54.2127519      1   1   mutant
82    9.7313363      1   1   mutant
83  191.7103028      1   1   mutant
84   20.2759004      1   1   mutant
85   12.8419495      1   1   mutant
86    8.9863013      1   1   mutant
87   35.9148092      1   1   mutant
88  109.1658193      1   1   mutant
89  180.4625306      1   1   mutant
90  316.9468570      1   1   mutant
91   74.6940881      1   1   mutant
92    1.5242366      1   1   mutant
93   92.5397708      1   1   mutant
94    0.3090790      1   1   mutant
95   26.7661034      1   1   mutant
96   37.4962746      1   1   mutant
97   92.2262403      1   1   mutant
98   17.4968540      1   1   mutant
99   70.1003476      1   1   mutant
100  49.5776931      1   1   mutant
101   2.0711261      1   1   mutant
102  19.0415930      1   1   mutant
103  48.8789249      1   1   mutant
104  33.7733408      1   1   mutant
105  95.8023623      1   1   mutant
106  17.0938554      1   1   mutant
107  64.0017824      1   1   mutant
108  57.7357126      1   1   mutant
109   2.2094614      1   1   mutant
110 105.3269776      1   1   mutant
111   7.7946819      1   1   mutant
112  22.4425957      1   1   mutant
113   8.2861581      1   1   mutant
114 194.9750484      1   1   mutant
115 121.0981230      1   1   mutant
116  25.5713545      1   1   mutant
117  78.4164487      1   1   mutant
118  25.4955792      1   1   mutant
119  14.2174971      1   1   mutant
120   5.8266370      1   1   mutant
121   0.6611076      1   1   mutant
122 255.2372781      1   1   mutant
123  31.8732416      1   1   mutant
124  34.0981568      1   1   mutant
125 104.4046387      1   1   mutant
126 110.6487620      1   1   mutant
127  44.7932281      1   1   mutant
128  75.9373312      1   1   mutant
129 138.8411567      1   1   mutant
130   3.1782047      1   1   mutant
131   3.8171884      1   1   mutant
132   1.4400740      1   1   mutant
133 106.0114094      1   1   mutant
134   2.3935372      1   1   mutant
135   8.4209301      1   1   mutant
136   4.0394003      1   1   mutant
137   0.7908886      1   1   mutant
138 283.3410332      1   1   mutant
139 209.2178802      1   1   mutant
140   7.3055695      1   1   mutant
141  30.1780894      1   1   mutant
142  22.3628630      1   1   mutant
143  39.9645096      1   1   mutant
144  32.0368591      1   1   mutant
145 116.3344992      1   1   mutant
146  96.0431389      1   1   mutant
147  51.7631504      1   1   mutant
148  99.8620128      1   1   mutant
149  72.3208929      1   1   mutant
150  37.7721639      1   1   mutant
151  14.5160669      1   0       wt
152  88.8612891      1   0       wt
153  11.5404079      1   0       wt
154 752.6246783      1   0       wt
155 129.7948844      1   0       wt
156  76.3232691      1   0       wt
157 665.5408484      1   0       wt
158 223.9854106      1   0       wt
159 359.5083769      1   0       wt
160 107.4345946      1   0       wt
161 499.6606881      1   0       wt
162  17.7398411      1   0       wt
163 180.8063957      1   0       wt
164 293.1429592      1   0       wt
165 607.0886942      1   0       wt
166  87.3957468      1   0       wt
167  29.0399767      1   0       wt
168 231.7400630      1   0       wt
169  78.4126261      1   0       wt
170  36.3898862      1   0       wt
171  14.3556303      1   0       wt
172 622.6982115      1   0       wt
173  27.1224923      1   0       wt
174  50.5708478      1   0       wt
175 152.9159609      1   0       wt
176 122.0144354      1   0       wt
177  40.6959590      1   0       wt
178 356.2656497      1   0       wt
179   1.6024734      1   0       wt
180 377.8983066      1   0       wt
181 326.4266606      1   0       wt
182  73.2328582      1   0       wt
183 207.9844225      1   0       wt
184  92.3898120      1   0       wt
185  62.4704718      1   0       wt
186  37.8580836      1   0       wt
187 149.1383747      1   0       wt
188 154.1017657      1   0       wt
189   0.4422240      1   0       wt
190 443.1114113      1   0       wt
191  76.6245330      1   0       wt
192   2.0313540      1   0       wt
193 106.4093068      1   0       wt
194  13.0856067      1   0       wt
195  43.3496507      1   0       wt
196  17.8940405      1   0       wt
197 145.4961893      1   0       wt
198 131.7159720      1   0       wt
199 152.4957992      1   0       wt
200  21.8844768      1   0       wt
201 531.2440867      1   0       wt
202 782.2395296      1   0       wt
203 366.1563889      1   0       wt
204   7.2382124      1   0       wt
205  14.7951285      1   0       wt
206 435.3495883      1   0       wt
207 247.9471615      1   0       wt
208  90.0426426      1   0       wt
209 178.9595241      1   0       wt
210 141.4287436      1   0       wt
211 785.3278946      1   0       wt
212  31.9558413      1   0       wt
213 155.7036953      1   0       wt
214 322.4117467      1   0       wt
215   9.4797286      1   0       wt
216 136.0537911      1   0       wt
217  15.3212416      1   0       wt
218 157.9740412      1   0       wt
219  54.6824918      1   0       wt
220 207.0922546      1   0       wt
221 122.6478664      1   0       wt
222 333.8784485      1   0       wt
223 138.5106547      1   0       wt
224  33.3352985      1   0       wt
225 148.0441961      1   0       wt
226  40.8244551      1   0       wt
227 206.9051705      1   0       wt
228 376.5404438      1   0       wt
229 375.8753429      1   0       wt
230  66.6983369      1   0       wt
231 785.8549537      1   0       wt
232 276.2558944      1   0       wt
233  70.0236076      1   0       wt
234 239.6358414      1   0       wt
235  17.8020364      1   0       wt
236  46.9563903      1   0       wt
237 192.7544520      1   0       wt
238  12.6007708      1   0       wt
239  95.2817749      1   0       wt
240 487.0571457      1   0       wt
241 189.1391003      1   0       wt
242   4.6153072      1   0       wt
243  33.4946221      1   0       wt
244  90.4074740      1   0       wt
245  46.9124928      1   0       wt
246  43.9062462      1   0       wt
247  57.8226187      1   0       wt
248 114.9875257      1   0       wt
249  46.0780093      1   0       wt
250 410.0419391      1   0       wt
251 471.8248637      1   0       wt
252 115.6892924      1   0       wt
253   9.0457531      1   0       wt
254 116.1841227      1   0       wt
255  99.4311259      1   0       wt
256 278.8805828      1   0       wt
257 223.5717786      1   0       wt
258  93.3374281      1   0       wt
259 193.3658609      1   0       wt
260  22.5448858      1   0       wt
261 290.0416975      1   0       wt
262  82.0070334      1   0       wt
263 104.8292050      1   0       wt
264 248.4027845      1   0       wt
265 308.0367806      1   0       wt
266 101.7075932      1   0       wt
267 134.7212563      1   0       wt
268 101.7052105      1   0       wt
269 276.4122900      1   0       wt
270  30.4719249      1   0       wt
271 664.4676014      1   0       wt
272 168.0079374      1   0       wt
273 174.4440665      1   0       wt
274 466.0288952      1   0       wt
275 122.5466860      1   0       wt
276 178.5467135      1   1       wt
277 306.0062845      1   1       wt
278 103.7727835      1   1       wt
279 150.5745619      1   1       wt
280  76.7551941      1   1       wt
281 498.6953408      1   1       wt
282 520.2747198      1   1       wt
283  38.2325178      1   1       wt
284 367.2556695      1   1       wt
285   8.7953009      1   1       wt
286 115.8264686      1   1       wt
287 354.2339845      1   1       wt
288 170.2311984      1   1       wt
289  43.9285048      1   1       wt
290 934.5509947      1   1       wt
291  33.1321043      1   1       wt
292 633.7173180      1   1       wt
293   5.0601472      1   1       wt
294   2.9128934      1   1       wt
295 648.2932474      1   1       wt
296 375.3504171      1   1       wt
297  63.7528555      1   1       wt
298 195.7971780      1   1       wt
299  55.2990543      1   1       wt
300 720.5119073      1   1       wt</code></pre>
</div>
</div>
</section>
<section id="section-15" class="slide level2">
<h2></h2>
<p>이 데이터를 이용해 치료(trt)에 따른 두 생존곡선을 비교해 본다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb48"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb48-1"><a href="#cb48-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(ttAll, status) <span class="sc">~</span> trt, <span class="at">data=</span>geneConfounder) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(ttAll, status) ~ trt, data = geneConfounder)

        N Observed Expected (O-E)^2/E (O-E)^2/V
trt=0 150      150      183      6.00      15.9
trt=1 150      150      117      9.41      15.9

 Chisq= 15.9  on 1 degrees of freedom, p= 7e-05 </code></pre>
</div>
</div>
</section>
<section id="section-16" class="slide level2">
<h2></h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb50"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb50-1"><a href="#cb50-1"></a>fit<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(ttAll, status) <span class="sc">~</span> trt, <span class="at">data=</span>geneConfounder)</span>
<span id="cb50-2"><a href="#cb50-2"></a>labs<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Control"</span>,<span class="st">"Treated"</span>)</span>
<span id="cb50-3"><a href="#cb50-3"></a><span class="fu">ggsurvplot</span>(fit,<span class="at">data=</span>geneConfounder,<span class="at">legend=</span><span class="fu">c</span>(<span class="fl">0.7</span>,<span class="fl">0.9</span>),<span class="at">legend.title=</span><span class="st">""</span>,</span>
<span id="cb50-4"><a href="#cb50-4"></a>           <span class="at">legend.labs=</span>labs,<span class="at">pval=</span><span class="cn">TRUE</span>)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-36-1.png" width="960" class="r-stretch"><p>로그순위 검정의 결과 및 생존곡선에서 치료를 하면 생존이 감소하는 것으로 보이고 p값은 매우 낮은 것을 알 수 있다.</p>
</section>
<section id="층화된-로그순위검정-2" class="slide level2">
<h2>층화된 로그순위검정</h2>
<p>하지만 혼동변수인 genotype의 영향을 보정하여 생존곡선을 그리고 로그순위 검정을 해본다.</p>
<div class="cell">
<div class="sourceCode cell-code" id="cb51"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb51-1"><a href="#cb51-1"></a><span class="fu">survdiff</span>(<span class="fu">Surv</span>(ttAll, status) <span class="sc">~</span> trt <span class="sc">+</span> <span class="fu">strata</span>(genotype), <span class="at">data=</span>geneConfounder) </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
<div class="cell-output cell-output-stdout">
<pre><code>Call:
survdiff(formula = Surv(ttAll, status) ~ trt + strata(genotype), 
    data = geneConfounder)

        N Observed Expected (O-E)^2/E (O-E)^2/V
trt=0 150      150      133      2.17      7.57
trt=1 150      150      167      1.73      7.57

 Chisq= 7.6  on 1 degrees of freedom, p= 0.006 </code></pre>
</div>
</div>
</section>
<section id="생존곡선-2" class="slide level2">
<h2>생존곡선</h2>
<div class="cell">
<div class="sourceCode cell-code" id="cb53"><pre class="sourceCode numberSource r number-lines code-with-copy"><code class="sourceCode r"><span id="cb53-1"><a href="#cb53-1"></a>fit<span class="ot">=</span><span class="fu">survfit</span>(<span class="fu">Surv</span>(ttAll, status) <span class="sc">~</span> trt<span class="sc">+</span><span class="fu">strata</span>(genotype), <span class="at">data=</span>geneConfounder)</span>
<span id="cb53-2"><a href="#cb53-2"></a>labs<span class="ot">=</span><span class="fu">c</span>(<span class="st">"Control Mutant"</span>,<span class="st">"Control Wildtype"</span>,<span class="st">"Treated Mutant"</span>,<span class="st">"Treated Wildtype"</span>)</span>
<span id="cb53-3"><a href="#cb53-3"></a><span class="fu">ggsurvplot</span>(fit,<span class="at">data=</span>geneConfounder,<span class="at">legend=</span><span class="fu">c</span>(<span class="fl">0.75</span>,<span class="fl">0.85</span>),<span class="at">legend.labs=</span>labs)</span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>

</div>
<img data-src="chap3_files/figure-revealjs/unnamed-chunk-38-1.png" width="960" class="r-stretch"></section>
<section id="section-17" class="slide level2">
<h2></h2>
<ul>
<li>survdiff()함수의 출력결과는 어느 치료가 우월한지 알아보기가 쉽지 않기 때문에 생존곡선을 그려 비교하는 것이 중요하다.</li>
<li>혼동변수인 genotype의 영향을 보정한 후 치료군의 생존이 대조군보다 우월한 것으로 나타났으며 매우 유의한 p값을 보인다.</li>
<li>이 연구의 결과는 다음과 같이 해석할 수 있다.
<ol type="1">
<li>치료군은 대조군에 비해 우월한 생존을 보인다.</li>
<li>wild type은 mutant에 비해 우월한 생존을 보인다.</li>
<li>대조군에 비해 치료군에 mutant가 많이 포함되어 있어 유전자타입을 고려하지 않은 경우 치료군의 생존이 더 나쁜 것으로 보였다.</li>
</ol></li>
</ul>
</section>
<section id="section-18" class="slide level2">
<h2></h2>
<ul>
<li>관찰연구에서는 이러한 형태의 혼동변수의 영향이 흔히 관찰된다. 예를 들어 민족 간에 돌연변이의 출현빈도도 다르게 나타나고 새로운 실험적인 치료를 받을 수 있는 기회도 국가마다 다를 수 있기 때문에 혼동변수가 의심되는 경우 혼동변수의 영향을 보정하는 것이 바람직하다.</li>
</ul>
<div class="footer footer-default">

</div>
</section>
    </div>
  </div>

  <script>window.backupDefine = window.define; window.define = undefined;</script>
  <script src="chap3_files/libs/revealjs/dist/reveal.js"></script>
  <!-- reveal.js plugins -->
  <script src="chap3_files/libs/revealjs/plugin/quarto-line-highlight/line-highlight.js"></script>
  <script src="chap3_files/libs/revealjs/plugin/pdf-export/pdfexport.js"></script>
  <script src="chap3_files/libs/revealjs/plugin/reveal-menu/menu.js"></script>
  <script src="chap3_files/libs/revealjs/plugin/reveal-menu/quarto-menu.js"></script>
  <script src="chap3_files/libs/revealjs/plugin/quarto-support/support.js"></script>
  

  <script src="chap3_files/libs/revealjs/plugin/notes/notes.js"></script>
  <script src="chap3_files/libs/revealjs/plugin/search/search.js"></script>
  <script src="chap3_files/libs/revealjs/plugin/zoom/zoom.js"></script>
  <script src="chap3_files/libs/revealjs/plugin/math/math.js"></script>
  <script>window.define = window.backupDefine; window.backupDefine = undefined;</script>

  <script>

      // Full list of configuration options available at:
      // https://revealjs.com/config/
      Reveal.initialize({
'controlsAuto': true,
'previewLinksAuto': false,
'smaller': false,
'pdfSeparateFragments': false,
'autoAnimateEasing': "ease",
'autoAnimateDuration': 1,
'autoAnimateUnmatched': true,
'menu': {"side":"left","useTextContentForMissingTitles":true,"markers":false,"loadIcons":false,"custom":[{"title":"Tools","icon":"<i class=\"fas fa-gear\"></i>","content":"<ul class=\"slide-menu-items\">\n<li class=\"slide-tool-item active\" data-item=\"0\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.fullscreen(event)\"><kbd>f</kbd> Fullscreen</a></li>\n<li class=\"slide-tool-item\" data-item=\"1\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.speakerMode(event)\"><kbd>s</kbd> Speaker View</a></li>\n<li class=\"slide-tool-item\" data-item=\"2\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>o</kbd> Slide Overview</a></li>\n<li class=\"slide-tool-item\" data-item=\"3\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.overview(event)\"><kbd>e</kbd> PDF Export Mode</a></li>\n<li class=\"slide-tool-item\" data-item=\"4\"><a href=\"#\" onclick=\"RevealMenuToolHandlers.keyboardHelp(event)\"><kbd>?</kbd> Keyboard Help</a></li>\n</ul>"}],"openButton":true},
'smaller': false,
 
        // Display controls in the bottom right corner
        controls: false,

        // Help the user learn the controls by providing hints, for example by
        // bouncing the down arrow when they first encounter a vertical slide
        controlsTutorial: false,

        // Determines where controls appear, "edges" or "bottom-right"
        controlsLayout: 'edges',

        // Visibility rule for backwards navigation arrows; "faded", "hidden"
        // or "visible"
        controlsBackArrows: 'faded',

        // Display a presentation progress bar
        progress: true,

        // Display the page number of the current slide
        slideNumber: false,

        // 'all', 'print', or 'speaker'
        showSlideNumber: 'all',

        // Add the current slide number to the URL hash so that reloading the
        // page/copying the URL will return you to the same slide
        hash: true,

        // Start with 1 for the hash rather than 0
        hashOneBasedIndex: false,

        // Flags if we should monitor the hash and change slides accordingly
        respondToHashChanges: true,

        // Push each slide change to the browser history
        history: true,

        // Enable keyboard shortcuts for navigation
        keyboard: true,

        // Enable the slide overview mode
        overview: true,

        // Disables the default reveal.js slide layout (scaling and centering)
        // so that you can use custom CSS layout
        disableLayout: false,

        // Vertical centering of slides
        center: false,

        // Enables touch navigation on devices with touch input
        touch: true,

        // Loop the presentation
        loop: false,

        // Change the presentation direction to be RTL
        rtl: false,

        // see https://revealjs.com/vertical-slides/#navigation-mode
        navigationMode: 'linear',

        // Randomizes the order of slides each time the presentation loads
        shuffle: false,

        // Turns fragments on and off globally
        fragments: true,

        // Flags whether to include the current fragment in the URL,
        // so that reloading brings you to the same fragment position
        fragmentInURL: false,

        // Flags if the presentation is running in an embedded mode,
        // i.e. contained within a limited portion of the screen
        embedded: false,

        // Flags if we should show a help overlay when the questionmark
        // key is pressed
        help: true,

        // Flags if it should be possible to pause the presentation (blackout)
        pause: true,

        // Flags if speaker notes should be visible to all viewers
        showNotes: false,

        // Global override for autoplaying embedded media (null/true/false)
        autoPlayMedia: null,

        // Global override for preloading lazy-loaded iframes (null/true/false)
        preloadIframes: null,

        // Number of milliseconds between automatically proceeding to the
        // next slide, disabled when set to 0, this value can be overwritten
        // by using a data-autoslide attribute on your slides
        autoSlide: 0,

        // Stop auto-sliding after user input
        autoSlideStoppable: true,

        // Use this method for navigation when auto-sliding
        autoSlideMethod: null,

        // Specify the average time in seconds that you think you will spend
        // presenting each slide. This is used to show a pacing timer in the
        // speaker view
        defaultTiming: null,

        // Enable slide navigation via mouse wheel
        mouseWheel: false,

        // The display mode that will be used to show slides
        display: 'block',

        // Hide cursor if inactive
        hideInactiveCursor: true,

        // Time before the cursor is hidden (in ms)
        hideCursorTime: 5000,

        // Opens links in an iframe preview overlay
        previewLinks: false,

        // Transition style (none/fade/slide/convex/concave/zoom)
        transition: 'none',

        // Transition speed (default/fast/slow)
        transitionSpeed: 'default',

        // Transition style for full page slide backgrounds
        // (none/fade/slide/convex/concave/zoom)
        backgroundTransition: 'none',

        // Number of slides away from the current that are visible
        viewDistance: 3,

        // Number of slides away from the current that are visible on mobile
        // devices. It is advisable to set this to a lower number than
        // viewDistance in order to save resources.
        mobileViewDistance: 2,

        // The "normal" size of the presentation, aspect ratio will be preserved
        // when the presentation is scaled to fit different resolutions. Can be
        // specified using percentage units.
        width: 1050,

        height: 700,

        // Factor of the display size that should remain empty around the content
        margin: 0.1,

        math: {
          mathjax: 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js',
          config: 'TeX-AMS_HTML-full',
          tex2jax: {
            inlineMath: [['\\(','\\)']],
            displayMath: [['\\[','\\]']],
            balanceBraces: true,
            processEscapes: false,
            processRefs: true,
            processEnvironments: true,
            preview: 'TeX',
            skipTags: ['script','noscript','style','textarea','pre','code'],
            ignoreClass: 'tex2jax_ignore',
            processClass: 'tex2jax_process'
          },
        },

        // reveal.js plugins
        plugins: [QuartoLineHighlight, PdfExport, RevealMenu, QuartoSupport,

          RevealMath,
          RevealNotes,
          RevealSearch,
          RevealZoom
        ]
      });
    </script>
    
    <script>
      // htmlwidgets need to know to resize themselves when slides are shown/hidden.
      // Fire the "slideenter" event (handled by htmlwidgets.js) when the current
      // slide changes (different for each slide format).
      (function () {
        function fireSlideChanged(previousSlide, currentSlide) {

          // dispatch for htmlwidgets
          const event = window.document.createEvent("Event");
          event.initEvent("slideenter", true, true);
          window.document.dispatchEvent(event);

          // dispatch for shiny
          if (window.jQuery) {
            if (previousSlide) {
              window.jQuery(previousSlide).trigger("hidden");
            }
            if (currentSlide) {
              window.jQuery(currentSlide).trigger("shown");
            }
          }
        }

        // hookup for reveal
        if (window.Reveal) {
          window.Reveal.addEventListener("slidechanged", function(event) {
            fireSlideChanged(event.previousSlide, event.currentSlide);
          });
        }

        // hookup for slidy
        if (window.w3c_slidy) {
          window.w3c_slidy.add_observer(function (slide_num) {
            // slide_num starts at position 1
            fireSlideChanged(null, w3c_slidy.slides[slide_num - 1]);
          });
        }

      })();
    </script>

    <script id="quarto-html-after-body" type="application/javascript">
    window.document.addEventListener("DOMContentLoaded", function (event) {
      const toggleBodyColorMode = (bsSheetEl) => {
        const mode = bsSheetEl.getAttribute("data-mode");
        const bodyEl = window.document.querySelector("body");
        if (mode === "dark") {
          bodyEl.classList.add("quarto-dark");
          bodyEl.classList.remove("quarto-light");
        } else {
          bodyEl.classList.add("quarto-light");
          bodyEl.classList.remove("quarto-dark");
        }
      }
      const toggleBodyColorPrimary = () => {
        const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
        if (bsSheetEl) {
          toggleBodyColorMode(bsSheetEl);
        }
      }
      toggleBodyColorPrimary();  
      const tabsets =  window.document.querySelectorAll(".panel-tabset-tabby")
      tabsets.forEach(function(tabset) {
        const tabby = new Tabby('#' + tabset.id);
      });
      const clipboard = new window.ClipboardJS('.code-copy-button', {
        target: function(trigger) {
          return trigger.previousElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        // button target
        const button = e.trigger;
        // don't keep focus
        button.blur();
        // flash "checked"
        button.classList.add('code-copy-button-checked');
        var currentTitle = button.getAttribute("title");
        button.setAttribute("title", "Copied!");
        setTimeout(function() {
          button.setAttribute("title", currentTitle);
          button.classList.remove('code-copy-button-checked');
        }, 1000);
        // clear code selection
        e.clearSelection();
      });
      function tippyHover(el, contentFn) {
        const config = {
          allowHTML: true,
          content: contentFn,
          maxWidth: 500,
          delay: 100,
          arrow: false,
          appendTo: function(el) {
              return el.closest('section.slide') || el.parentElement;
          },
          interactive: true,
          interactiveBorder: 10,
          theme: 'quarto-reveal',
          placement: 'bottom-start'
        };
          config['offset'] = [0,0];
          config['maxWidth'] = 700;
        window.tippy(el, config); 
      }
      const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
      for (var i=0; i<noterefs.length; i++) {
        const ref = noterefs[i];
        tippyHover(ref, function() {
          // use id or data attribute instead here
          let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
          try { href = new URL(href).hash; } catch {}
          const id = href.replace(/^#\/?/, "");
          const note = window.document.getElementById(id);
          return note.innerHTML;
        });
      }
      var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
      for (var i=0; i<bibliorefs.length; i++) {
        const ref = bibliorefs[i];
        const cites = ref.parentNode.getAttribute('data-cites').split(' ');
        tippyHover(ref, function() {
          var popup = window.document.createElement('div');
          cites.forEach(function(cite) {
            var citeDiv = window.document.createElement('div');
            citeDiv.classList.add('hanging-indent');
            citeDiv.classList.add('csl-entry');
            var biblioDiv = window.document.getElementById('ref-' + cite);
            if (biblioDiv) {
              citeDiv.innerHTML = biblioDiv.innerHTML;
            }
            popup.appendChild(citeDiv);
          });
          return popup.innerHTML;
        });
      }
    });
    </script>
    

</body></html>